<!DOCTYPE html>
<!-- this file is auto-generated from docs/api-versions.md. Do not edited directly -->
<!--
Copyright 2012, Gregg Tavares.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

    * Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above
copyright notice, this list of conditions and the following disclaimer
in the documentation and/or other materials provided with the
distribution.
    * Neither the name of Gregg Tavares. nor the names of his
contributors may be used to endorse or promote products derived from
this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0, user-scalable=yes">
    <meta property="og:title" content="API Versions"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="http://docs.happyfuntimes.net/docs/images/happyfuntimes.jpg"/>
    <meta property="og:description" content="What each version of HappyFunTimes adds or changes"/>
    <meta property="og:url" content="http://docs.happyfuntimes.net/docs/api-versions.html"/>

    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:site" content="@greggman"/>
    <meta name="twitter:creator" content="@greggman"/>
    <meta name="twitter:domain" content="docs.happyfuntimes.net"/>
    <meta name="twitter:title" content="API Versions"/>
    <meta name="twitter:url" content="http://docs.happyfuntimes.net/docs/api-versions.html"/>
    <meta name="twitter:description" content="What each version of HappyFunTimes adds or changes"/>
    <meta name="twitter:image:src" content="http://docs.happyfuntimes.net/docs/images/happyfuntimes.jpg"/>

    <title>API Versions</title>

    <link href="/public/hft-icon.png" rel="shortcut icon" type="image/png">
    <link rel="stylesheet" href="/docs/assets/css/styles.css" type="text/css"/>
</head>
<body>

<div class="header">
  <h1><a href="/docs">HappyFunTimes Docs</a></h1>
</div>



<div class="container">

    <div class="docs-title">
        <h1>API Versions</h1>
    </div>

    <div class="row">
        <div class="col-xs-12 col-lg-8 docs-content">

            <p>In the <code>package.json</code> you set an <code>apiVersion</code>. The versions follows
the <a href="http://semver.org">semver</a> standard meaning version 1.2.x is
supposed to be backward compatible with 1.1.x but 2.0.x is not
backward compatible.</p>
<p>To use a feature below be sure to set your apiVersion to
the correct version.</p>
<h2 id="overview">Overview</h2>
<ul>
<li><p>v1.1.0</p>
<ul>
<li>Unity no longer needs a gameId in the code.</li>
</ul>
</li>
<li><p>v1.2.0</p>
<ul>
<li><p>Supports es6 features. This feature is not extensively
tested but, if you name a file ending in <code>.js6</code> happyFunTimes
will automatically transpile it into es5 at runtime</p>
<p>So for example to use you might do</p>
<pre><code>requirejs([
  &#39;./some-es5-file.js`,
  &#39;./some-es6.file.js6`,
], function(
  SomeES5File,
  SomeES6File) {
  ..
});
</code></pre><p>Warning: ES6 has not shipped yet which means the spec can
change. HappyFunTimes is using <a href="https://github.com/google/traceur-compiler">google-traceur</a>
to supply this feature.</p>
</li>
</ul>
</li>
<li><p>v1.3.0</p>
<ul>
<li><p>Supports using <code>&lt;script&gt;</code> tags instead of <a href="http://requirejs.org">require.js</a>.</p>
<p>I really like <a href="http://requirejs.org">require.js</a>&#39; style of modules. It encourages
dependency injection, it also suppots module independence. But, for many it&#39;s non
standard.</p>
<p>So, if you want to just use standard script tags make sure your <code>package.json</code> has its
<code>happyFunTimes.apiVersion</code> set to <code>1.3.0</code> or higher and add the flag <code>happyFunTimes.useScriptTag</code> set
to <code>true</code>. Example:</p>
<pre><code>{
  ...
  &quot;happyFunTimes&quot;: {
    ...
    &quot;apiVersion&quot;: &quot;1.3.0&quot;,
    &quot;useScriptTag&quot;: true,
    ...
  }
}
</code></pre><p>The <code>&lt;script&gt;</code> tags for HappyFunTimes are automatically
added for you and so is the script tag that includes <code>scripts/game.js</code> for your game and
<code>scripts/controller.js</code> for your controller. If you need any other scripts add script tags to
either <code>game.html</code> or <code>controller.html</code>.  The HappyFunTimes libraries will be inserted before
those tags. The <code>game.js</code> or <code>controller.js</code> will be inserted after.</p>
<p>For a working example see <a href="http://github.com/greggman/hft-simple-script">http://github.com/greggman/hft-simple-script</a></p>
</li>
<li><p>Fix for Unity Games on Windows</p>
<p>You need to upgrade old Unity Games to the latest .dlls.
<a href="https://github.com/greggman/hft-unity3d/releases">Download the .dll here</a>
You&#39;ll also need the latest version of happyFunTimes. At least verison 0.0.9.
<a href="http://docs.happyfuntimes.net/install.html">Download here</a></p>
</li>
</ul>
</li>
<li><p>v1.4.0</p>
<ul>
<li><p>Support for multiple <code>GameServer</code>s on one game</p>
<p>Normally if 2 <code>GameServer</code>s from the same game try to connect to HappyFunTimes
the second one will disconnect the first one and become the <strong>one</strong> GameServer
running the game.</p>
<p>The thinking there was if there is already a game running and HappyFunTimes
sees another try to start it probably means you left a window open somewhere
or some how the old game didn&#39;t get disconnected from HappyFunTimes so
you probably want the new one to take charge.</p>
<p>Now though, in your options to <code>GameServer</code> you can pass in <code>allowMutlipleGames: true</code>
as in</p>
<pre><code>var server = new GameServer({
  allowMultipleGames: true,
  id: &quot;ABC&quot;,  // &lt;= OPTIONAL make this different for each GameServer
});
</code></pre><p>This will let 2 or more GameServers connect for a particular game.
This is useful for example for running a game across multiple machines.</p>
<p>Each game still runs on its own but it can pass players to other
games by calling <code>NetPlayer.switchPlayer(id, data)</code> where
<code>id</code> is the id of the game.</p>
<p>The <code>NetPlayer</code> in this game will disconnect and a <code>playerconnect</code> message
will get emitted in the game corresponding to <code>id</code>.</p>
<p>Example: Imagine you have 3 machines AAA, BBB, and CCC. Imagine they
are arranged next to each other like this</p>
<pre><code> +-------------+  +-------------+  +-------------+
 |             |  |             |  |             |
 |             |  |             |  |             |
 |     AAA     |  |     BBB     |  |     CCC     |
 |             |  |             |  |             |
 |             |  |             |  |             |
 +-------------+  +-------------+  +-------------+
</code></pre><p>Let&#39;s say you have a platforming game, when the player hits
the right edge of the screen on machine AAA you&#39;d call</p>
<pre><code>netPlayer.switchGame(&quot;BBB&quot;);
</code></pre><p>and machine BBB&#39;s GameServer will get a &#39;playerconnect&#39; event
with that player. You can send data that will get delivered
to machine BBB with the <code>playerconnect</code> event by adding any
JSONable object as the 2nd argument to <code>switchGame</code></p>
<p>On machine AAA</p>
<pre><code>if (playerTouchedRightEdge()) {
  netPlayer.switchGame(&quot;BBB&quot;, {startPosition: &quot;onLeft&quot;});
}
</code></pre><p>On machine BBB</p>
<pre><code>gameServer.addEventListener(&#39;playerconnect&#39;, addPlayer);

function addPlayer(netPlayer, name, data) {

   if (!data) {
      // There&#39;s no data so this player probably just connected
   } else {
      // This player is switching from another game
      // where should we start them?
      var startX = (data.startPosition == &quot;onLeft&quot;) 0 : width;
   }
};
</code></pre><p>New players are always added to the first GameServer that connected to
HappyFunTimes. After that it&#39;s up to you to decide how to pass the players
among games.</p>
<p>See <a href="http://github.com/greggman/hft-jumpabout/">hft-jumpabout</a> for
a working example</p>
<h3 id="setting-the-id-for-the-game-">Setting the id for the game.</h3>
<p>As for setting the <code>id</code> I&#39;d suggest passing one on the URL. If you don&#39;t
pass in an id one will be assigned. The assigned id is passed
through the <code>gameid</code> message. You&#39;ll only get this message if you
don&#39;t assign your own id.</p>
<pre><code>var server = new GameServer({
  allowMultipleGames: true,
});

server.addEventListener({&#39;gameid&#39;, function(data) {
  console.log(&quot;this game&#39;s id is: &#39; + data.id);
});
</code></pre><p>Conversely, there can only be 1 game per id. So if you assign
your own ids anytime the same id is used the previous game using
that id will be disconnected.</p>
<h3 id="talking-between-games">Talking between games</h3>
<p>Unlike players where there&#39;s a &#39;playerconnect&#39; msg sent each time a
player connects and a <code>NetPlayer</code> object to represent that player, Games have
no corresponding events nor do they have an object.</p>
<p>If you&#39;d like other games to know when a new game has connected have
that new game call <code>GameServer.broadcastCmdToGames</code> and a message
will be send to all games. Any message sent from a game to another
game will have the id of the sender as the second parameter to the
handler.</p>
<p>On Game AAA</p>
<pre><code>var server = new GameServer({
  allowMultipleGames: true,
  id: &quot;ABC&quot;,
});

server.broadcastCmdToGames(&#39;alive&#39;);
</code></pre><p>On Game BBB</p>
<pre><code>server.addEventListener(&#39;alive&#39;, function(data, id) {
  console.log(&quot;other game&#39;s id is: &quot; + id);
});
</code></pre><p>Note you&#39;ll receive this message yourself
so you&#39;ll need to filter out matching ids.</p>
<pre><code>var server = new GameServer({id: &quot;foo&quot;});
server.broadcastCmdToGame(&#39;alive&#39;);

var otherGameIds = {};
server.addEventListner(&#39;alive&#39;, function(data, id) {
  if (id != &quot;foo&quot;) {
    otherGameIds[id] = true;
  }
});
</code></pre><p>To find out when a game disconnects check for the <code>gamedisconnect</code>
message</p>
<pre><code>server.addEventListener(&#39;gamedisconnect&#39;, function(data, id) {
    delete otherGameIds[id];
});
</code></pre><p>Once you know an <code>id</code> of another game
you can send a message directly to that game by
calling <code>GameServer.sendCmdToGame(cmd, idOfGame, data)</code></p>
<p>That command will arrive on the <code>GameServer</code> for that game.</p>
<p>Of course you&#39;re free to make your own tracking objects
if you want something similar to NetPlayer.
<a href="http://blog.happyfuntimes.net/blog/why-no-netgame-object/">I don&#39;t recommend it</a>.</p>
</li>
<li><p>Support for more templated files</p>
<p>Sometimes it&#39;s important that HappyFunTimes can insert information into
your files at runtime. This way it can always serve the correct code
for the version of HappyFunTimes you&#39;re running.</p>
<p>For <code>game.html</code> and <code>controller.html</code> this is done automatically. If
you&#39;d like other files to have info inserted you can add a
<code>happyFunTimes.templateUrls</code> field to your <code>package.json</code></p>
</li>
<li><p>--no-ask-name</p>
<p>For installations where you don&#39;t need to display the user&#39;s name
you can add --no-ask-name when you start the system and players
will not be asked enter their name.</p>
</li>
</ul>
</li>
<li><p>v1.5.0</p>
<ul>
<li><p>MobileHacks.adjustCSSBasedOnPhone</p>
<p>iOS8 broke things because unlike iOS7, with the phone in landscape, if the user
touches the bottom 1/2 inch of the screen or the top 1/2 inch of the screen the
address bar and shortcut bar appear AND NEVER DISAPPEAR from that point on.</p>
<p>That means the usable area of the browser is much smaller than iOS7 and controllers
that were visible in iOS7 are now covered by the bottom bar. There is no way to
handle this in CSS so we needed a way to check for a specific phone and change
the CSS programatically.</p>
</li>
</ul>
</li>
<li><p>v1.6.0</p>
<ul>
<li><p>CommonUI.setStatus, CommonUI.log, CommonUI.error</p>
<p>These work the same as the corresponding GameSupport functions
except for the controller.</p>
</li>
</ul>
</li>
<li><p>v1.7.0</p>
<ul>
<li>Can put controller files in Assets/WebPlayerTemplates/HappyFunTimes</li>
</ul>
</li>
<li><p>v1.8.0</p>
<ul>
<li>Added <code>hft-landscape</code> and <code>hft-landscape-rot90</code> CSS</li>
</ul>
</li>
<li><p>v1.9.0</p>
<ul>
<li>Added id tracking</li>
</ul>
</li>
<li><p>v1.10.0</p>
<ul>
<li>Added app support</li>
<li>Added fullscreen support for Android</li>
<li>Added orientation handling for Android and the app</li>
</ul>
</li>
<li><p>v1.11.0</p>
<ul>
<li><p>Games can provide files for controller.</p>
<p>When calling <code>new GameServer&#39; the options you
pass in now has a</code>files` field. You can use it to
provide files for the controller. As a simple example</p>
<pre><code>options.files[&quot;controller.html&quot;] = controllerHTMLContent;
options.files[&quot;scripts/controller.js&quot;] = controllerJSContent;
options.files[&quot;css/controller.css&quot;] = controllerCSSContent;
</code></pre><p>This allows the game to provide all the files HappyFunTimes
to server to the controller so that no external files are
needed.</p>
</li>
<li><p>GameClient now has both a <code>log</code> and an <code>error</code></p>
<p>These functions work just like <code>console.log</code> and <code>console.error</code>
except they also send the message back to the game. The game
will print out the message. This is useful for testing or debugging
but <em>BEWARE</em></p>
<ol>
<li><p>Messages use bandwidth.</p>
<p>So for example if you&#39;re checking for checking for an error that
rarely happens then no problem but if you&#39;re printing some
info often for testing you should remove or comment out the
line before using your controller with real users.</p>
</li>
<li><p>They can&#39;t help with JavaScript errors.</p>
<p>If your JavaScript has an error then JavaScript stops running and
of course the JavaScript needed to send messages will not be
running either.</p>
<p>The point is even though this is convenient remember that just
because you don&#39;t see any errors in the game doesn&#39;t mean
there aren&#39;t errors in your controller. Remember to use
remote debugging in Safari and Chrome to debug.</p>
</li>
</ol>
</li>
</ul>
</li>
<li><p>v1.12.0</p>
<ul>
<li><p>Made <code>Touch.setupVirtualDPads</code> use the middle of the referenceElement if
<code>offsetX</code> or <code>offsetY</code> is not set for that dpad.</p>
<p>This is better because it means if things change size based on CSS or other
stuff there&#39;s nothing to do. The code will just work.</p>
</li>
</ul>
</li>
<li><p>v1.13.0</p>
<ul>
<li><p>Added <code>orientationOptional</code> to <code>CommonUI.setupStandardControllerUI</code></p>
<p>Setting it to true makes the commonUI not tell the user to orient their
phone if their phone doesn&#39;t support orientation. Example usage is
are the device orientation examples. They want the phone to be in
portrait but as of iOS 8.3 Safari doesn&#39;t support orientation. So
the message that used to come up would be confusing as the user
orients their phone.</p>
</li>
</ul>
</li>
<li><p>v1.14.0</p>
<ul>
<li><p>Fixed <code>gamedisconnect</code> message so in includes id of game that disconnected</p>
<p>When doing a multi-machine game, when a game disconnects a <code>gamedisconnect</code>
message is sent to all the remaining games. It was missing the id
of the game that disconnected. That&#39;s been added.</p>
</li>
</ul>
</li>
<li><p>v1.15.0</p>
<ul>
<li><p>Choose a position for connect info</p>
<p>As of HappyFunTimes 0.0.36 you can use <code>--instructions</code> to disable
a banner showing how to connect. Now you can use <code>--instructions-position=bottom</code>
or <code>top</code> to set the position of the instructions. You can also add
<code>&quot;instuctionsPosition&quot;: &quot;bottom&quot;</code> to the <code>happyFunTimes</code> section of your
<code>package.json</code> file to set it per game. The default is top.</p>
</li>
<li><p>Added <code>happyFunTimes.templateFileOptions</code></p>
<p><a href="packagejson.html#-happyfuntimes-templatefileoptions-">See docs</a></p>
</li>
</ul>
</li>
</ul>


            <div class="docs-footer">

                <div>Found a bug? <a href="http://github.com/greggman/happyfuntimes/issues">Create an issue on Github</a></div>

                <div class="docs-comments">
                    <div id="disqus_thread"></div>
                    <script type="text/javascript">
                        var disqus_shortname = 'happyfuntimes';
                        var disqus_identifier = 'API Versions';
                        var disqus_title = 'API Versions';

                        /* * * DON'T EDIT BELOW THIS LINE * * */
                        (function () {
                            if (window.location.hostname.indexOf("happyfuntimes") < 0) {
                                return;
                            }
                            var dsq = document.createElement('script');
                            dsq.type = 'text/javascript';
                            dsq.async = true;
                            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                        })();
                    </script>
                    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments
                        powered by Disqus.</a></noscript>
                    <a href="http://disqus.com" class="dsq-brlink">
                        comments powered by <span class="logo-disqus">Disqus</span>
                    </a>
                </div>

            </div>
        </div>

        <div class="col-xs-12 col-lg-4 docs-sidebar">
            <ul class="nav">
    <li><a href="introduction.html">Introduction</a></li>
    <li>
        <b>Setup</b>
        <ul class="nav">
            <li><a href="setup/macos.html">OSX</a></li>
            <li><a href="setup/windows.html">Windows</a></li>
            <li><a href="setup/linux.html">Linux</a></li>
        </ul>
    </li>
    <li>
        <b>Making Games</b>
        <ul class="nav">
            <li><a href="making-games/">Making games in HTML5</a></li>
            <li><a href="unity/">Making games in Unity3D</a></li>
            <li><a href="tips.html">Tips</a></li>
            <li><a href="commands.html">hft command</a></li>
        </ul>
    </li>
    <li>
        <b>Ideas and Examples</b>
        <ul class="nav">
            <li><a href="ideas.html">Ideas</a></li>
            <li><a href="examples.html">Examples</a></li>
        </ul>
    </li>
    <li>
        <b>API</b>
        <ul class="nav">
            <li><a href="api-versions.html">API Versions</a></li>
            <li><a href="migration.html">Migrating from older APIs</a></li>
        </ul>
    </li>
    <li>
        <b>Other Content</b>
        <ul class="nav">
            <li><a href="network.html">Museums & Installations</a></li>
        </ul>
    </li>
    <li>
        <b>Contributing</b>
        <ul class="nav">
            <li><a href="contributing.html">Contributing</a></li>
            <li><a href="future.html">Future Features</a></li>
        </ul>
    </li>
</ul>

        </div>

    </div>
</div>

<script src="/docs/assets/3rdparty/jquery.js"></script>
<script src="/docs/assets/3rdparty/highlight.js"></script>
<script src="/docs/assets/js/lesson.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-51764205-4', 'auto');
  ga('send', 'pageview');
</script>


</body>
</html>



