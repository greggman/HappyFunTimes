<!DOCTYPE html>
<!-- this file is auto-generated from docs/unity/self-control.md. Do not edited directly -->
<!--
Copyright 2012, Gregg Tavares.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

    * Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above
copyright notice, this list of conditions and the following disclaimer
in the documentation and/or other materials provided with the
distribution.
    * Neither the name of Gregg Tavares. nor the names of his
contributors may be used to endorse or promote products derived from
this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta property="og:title" content="Making Controllers" />
<meta property="og:type" content="website" />
<meta property="og:image" content="http://docs.happyfuntimes.net/docs/images/happyfuntimes.jpg" />
<meta property="og:description" content="How to make controllers for HappyFunTimes" />
<meta property="og:url" content="http://docs.happyfuntimes.net/docs/unity/self-control.html" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@greggman" />
<meta name="twitter:creator" content="@greggman" />
<meta name="twitter:domain" content="docs.happyfuntimes.net" />
<meta name="twitter:title" content="Making Controllers" />
<meta name="twitter:url" content="http://docs.happyfuntimes.net/docs/unity/self-control.html" />
<meta name="twitter:description" content="How to make controllers for HappyFunTimes" />
<meta name="twitter:image:src" content="http://docs.happyfuntimes.net/docs/images/happyfuntimes.jpg" />

<title>Making Controllers</title>

<link href="/public/hft-icon.png" rel="shortcut icon" type="image/png">
<link rel="stylesheet" href="/docs/assets/css/styles.css" type="text/css" />
</head>
<body>
<div class="header">
  <h1><a href="/docs/unity">HappyFunTimes Docs</a></h1>
</div>


<div class="container">
  <div class="docs-title">
    <h1>Making Controllers</h1>
  </div>
  <div class="row">
    <div class="col-sm-8 docs-content">
      <p>Controllers are the part that runs on the phone as in
the phone becomes a game controller.</p>
<p>Controllers are just webpages that appear on the phone.
HappyFunTimes provides the connection between the phone
and the game but it&#39;s up to you to make HTML, CSS,
JavaScript, Images and whatever else you need for your
controllers.</p>
<p>The easist path is to choose one of the existing games
and start modifying.</p>
<p>For Unity games the files for samples controllers exist in
<code>Assets/WebPlayerTemplates/HappyFunTimes/controllers</code>. For each
controller the relevant files are:</p>
<pre><code>controller.html           // The HTML for your controller
css/controller.css        // The CSS for your controller
scripts/controller.js     // The main script for your controller
</code></pre><p>Edit or better copy those 3 files to create your controller. If you need other
JavaScript libraries or other assets (image, sounds) put them
somewhere under <code>Assets/WebPlayerTemplates/HappyFunTimes</code> or a deeper like
<code>Assets/WebPlayerTemplates/HappyFunTimes/images</code> and/or
<code>Assets/WebPlayerTemplates/HappyFunTimes/mygame/sounds</code></p>
<h3 id="controller-html">controller.html</h3>
<p>The minimum content of controller.html is</p>
<pre><code>&lt;script src=&quot;/hft/hft.js&quot;&gt;&lt;/script&gt;
</code></pre><p>Everything else is option. You can put your own script directly in the HTML
or put outside with another script tag. All of the sample controller load
at least 2 more scripts</p>
<pre><code>&lt;script src=&quot;/sample-ui/sample-ui.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;scripts/controller.js&quot;&gt;&lt;/script&gt;
</code></pre><p>Some load more for 3rdparty libraries etc...</p>
<h3 id="controller-js">controller.js</h3>
<p>The minimum contents of a <code>controller.js</code> (or wherever you put your JavaScript) is</p>
<pre><code>var client = new hft.GameClient();
</code></pre><p>That&#39;s it. If you&#39;d like to use the sample ui
then you&#39;d also add something like</p>
<pre><code>var commonUI = sampleUI.commonUI;
var input = sampleUI.input;
var misc = sampleUI.misc;
var mobileHacks = sampleUI.mobileHacks;
var strings = sampleUI.strings;
var touch = sampleUI.touch;

var globals = {
  debug: false,
  //orientation: &quot;landscape-primary&quot;,
};
misc.applyUrlSettings(globals);
mobileHacks.fixHeightHack();
mobileHacks.disableContextMenu();

var client = new hft.GameClient();   // -------- NOTICE LINE FROM ABOVE -----------

commonUI.setupStandardControllerUI(client, globals);
commonUI.askForNameOnce();
commonUI.showMenu(true);
</code></pre><p>If you use the sample-ui put your elements inside the the <code>id=&quot;hft-content&quot;</code> div and before
the <code>id=&quot;hft-menu&quot;</code> div.</p>
<pre><code>&lt;div id=&quot;hft-content&quot;&gt;

    &lt;!-- your elements go here if you&#39;re using the sample-ui --&gt;

    &lt;div id=&quot;hft-menu&quot;&gt;&lt;img src=&quot;/hft/assets/gear-icon.svg&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre><p>The rest is up to you. Add HTML elements as you see fit. Read HTML events and
call <code>client.sendCmd</code> to pass whatever events you want back to the game. Add listeners
with <code>client.addEventListener</code> for any events you want to send from the game back to the
controller.</p>
<pre><code>client.sendCmd(&#39;foo&#39;, { someNumber: 123, someString, &quot;abc&quot;, someBool: true});
</code></pre><p>Will emit a message on the corresponding <code>NetPlayer</code> in the game.</p>
<pre><code>using HappyFunTimes;

...

class FooMsg {
  public int someNumber;
  public string someString;
  public bool someBool;
};

private NetPlayer m_netPlayer;

void InitializeNetPlayer(SpawnInfo spawnInfo) {
   // save off the NetPlayer so we can communicate with the phone
   m_netPlayer = spawnInfo.netPlayer;

   // Register a method to call when the phone sends the `foo` message
   m_netPlayer.RegisterCmdHandler&lt;FooMsg&gt;(&quot;foo&quot;, OnFooMsg);
}

void OnFooMsg(FooMsg msgData) {
  // do something with the data you sent from the phone
  Debug.Log(&quot;someNumber: &quot; + msgData.someNumber);
  Debug.Log(&quot;someString: &quot; + msgData.someString);
  Debug.Log(&quot;someBool: &quot; + msgData.someBool);
}
</code></pre><p>Similary any message sent by the game</p>
<pre><code>class BarMsg {
  BarMsg(string s, bool b, float n) {
    aString = s;
    aBool = b;
    aNumber = n;
  }

  public string aString;
  public bool aBool;
  public flaot aNumber;
};

m_netPlayer.sendCmd(&quot;bar&quot;, new BarMsg((&quot;hello&quot;, true, 1.23));
</code></pre><p>Will emit an event back in the controller.</p>
<pre><code>client.addEventListener(&#39;bar&#39;, handleBar);

function handleBar(data) {
  console.log(data);
  // should show { aString: &quot;hello&quot;, aBool: true, aNumber: 1.23 }
}
</code></pre><h3 id="dealing-with-different-phone-sizes">Dealing with different phone sizes</h3>
<p>The hardest part of creating a controller is handling
CSS and placement across browser versions and devices. For example iOS6.1,
iOS7.0, iOS7.1, iOS8.3, iOS9.x all provide a different size usable area
in Safari. On top fo that 3.5inch iPhones vs 4inch iPhones and newer provide a different usable area.
And finally add Android on top of that and possibly iPad and other tablets and you can see
this is the hardest part.</p>
<p>If you design on a iPhone6 plus be sure to test on some smaller phones like an iPhone4s.
Keep your controllers simple or look up responsive design. Possibly consider using a
<a href="https://www.google.com/search?q=css%20frameworks&amp;rct=j">CSS framework</a>.</p>
<h2 id="debugging">Debugging</h2>
<p>If you happen to be on a Mac <a href="https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/iOS_Simulator_Guide/Introduction/Introduction.html">the iOS Simulator</a>
that comes with <a href="https://developer.apple.com/xcode/download/">XCode</a> is your friend.
Also see <a href="https://developers.google.com/web/tools/chrome-devtools/iterate/device-mode/emulate-mobile-viewports">Chrome&#39;s phone emulation mode</a>.
<a href="https://developers.google.com/web/tools/chrome-devtools/iterate/device-mode/device-input-and-sensors?hl=en">Chrome&#39;s dev tools can even emulate phone orientation</a>.</p>
<p><a href="https://developers.google.com/web/tools/chrome-devtools/debug/remote-debugging/remote-debugging?hl=en">Chrome&#39;s Remote Debugging</a>
and <a href="https://developer.apple.com/library/iad/documentation/AppleApplications/Conceptual/Safari_Developer_Guide/GettingStarted/GettingStarted.html#//apple_ref/doc/uid/TP40007874-CH2-SW8">Safari Remote Debugging</a>
are super useful. You plug you phone into the computer with a USB cable and you can
debug webpages running on your phone from your computer.</p>
<h2 id="more-info">More info</h2>
<p>For more info see <a href="basics.html">The Basics of HappyFunTimes and Unity</a></p>

      <div class="docs-footer">
        <div>Questions? <a href="http://stackoverflow.com/questions/tagged/happyfuntimes">Ask on stackoverflow</a>.</div>
        <div>Issue/Bug? <a href="http://github.com/greggman/happyfuntimes/issues">Create an issue on github</a>.</div>
        <div class="docs-comments">
          <div id="disqus_thread"></div>
          <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'happyfuntimes'; // required: replace example with your forum shortname
            var disqus_identifier = 'Making Controllers';
            var disqus_title = 'Making Controllers';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
              if (window.location.hostname.indexOf("happyfuntimes") < 0) {
                return;
              }
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
      </div>
    </div>
    <div class="col-sm-3 col-sm-offset-1 docs-sidebar">
        <ul class="toc">
    <li>HappyFunTimes & Unity
        <ul>
            <li><a href="getting-started.html">Getting Started</a><span class="hide">: Do this first!</span></li>
            <li><a href="first-game.html">Your First HappyFunTimes Game</a><span class="hide">: Do this second!</span>
            </li>
            <li><a href="gamepad.html">The Sample Gamepad</a><span class="hide">: Read this!</span></li>
            <li><a href="basics.html">How it Works</a><span class="hide">: Read this!</span></li>
        </ul>
    </li>
    <li>Specifics
        <ul>
            <li><a href="player-connect.html">Spawn players</a></li>
            <li><a href="self-control.html">Making controllers (the phone part)</a></li>
            <li><a href="gamepad-sounds.html">Playing sounds on the phone</a></li>
            <li><a href="gamepad-multitouch.html">Handling Multi-Touch</a></li>
        </ul>
    </li>
    <li>Examples
        <ul>
            <li><a href="3d-characters.html">3d Characters</a></li>
            <li><a href="2d-platformer.html">2d Platformer</a></li>
        </ul>
    </li>
    <li>Techinques
        <ul>
            <li><a href="reusing-players.html">Handling disconnect and reconnect</a></li>
            <li><a href="too-many-players.html">Preventing too many players</a></li>
            <li><a href="device-orientation.html">Using Device Orientation</a></li>
            <li><a href="accelerometer.html">Using the Accelerometer</a></li>
            <li><a href="character-selection.html">Spawning different characters per Player</a></li>
            <li><a href="multi-machine.html">Multiple Computers</a></li>
            <li><a href="talking-between-games.html">Talking Between Multiple Computers</a></li>
        </ul>
    </li>
    <li>Sample-UI API Reference
        <ul>
            <li><a href="/docs/hft/">Sample UI (HTML/JavaScript) API</a></li>
        </ul>
    </li>
    <li>Other
        <ul>
            <li><a href="happyfuntimes-options.html">HappyFunTimes Options</a></li>
            <li><a href="../troubleshooting.html">Troubleshooting</a></li>
            <li><a href="https://github.com/greggman/hft-unity3d/issues/">Support</a></li>
            <li><a href="changelog.html">Changelog</a></li>
        </ul>
    </li>
</ul>




    </div>
  </div>
</div>
</body>
<script src="/docs/assets/3rdparty/jquery.js"></script>
<script src="/docs/assets/js/lesson.js"></script>
<script src="/docs/assets/3rdparty/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51764205-4', 'auto');
  ga('send', 'pageview');

</script>


</html>



